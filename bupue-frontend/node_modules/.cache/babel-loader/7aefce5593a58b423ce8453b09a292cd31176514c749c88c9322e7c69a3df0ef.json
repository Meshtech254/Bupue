{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import axios from'axios';import'./Marketplace.css';import{useCart}from'../../context/CartContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ItemList=()=>{const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{cart,updateQuantity,removeFromCart,clearCart}=useCart();const total=cart.reduce((sum,i)=>sum+i.item.price*i.quantity,0);useEffect(()=>{const fetchItems=async()=>{try{const res=await axios.get('/api/items');setItems(res.data);}catch(err){setError('Failed to load items');}finally{setLoading(false);}};fetchItems();},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading items...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Marketplace\"}),/*#__PURE__*/_jsx(Link,{to:\"/marketplace/create\",className:\"create-item-btn\",children:\"Add Item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"items-grid\",children:items.map(item=>{var _item$owner;return/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[item.images&&item.images[0]&&/*#__PURE__*/_jsx(\"img\",{src:item.images[0],alt:item.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/marketplace/\".concat(item._id),children:item.title})}),/*#__PURE__*/_jsxs(\"p\",{children:[item.description.slice(0,80),\"...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"By \",((_item$owner=item.owner)===null||_item$owner===void 0?void 0:_item$owner.username)||'Unknown']})]})]})]},item._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"marketplace-cart-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Cart\"}),cart.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Your cart is empty.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"cart-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Item\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subtotal\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(_ref=>{let{item,quantity}=_ref;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:quantity,onChange:e=>updateQuantity(item._id,parseInt(e.target.value)||1),style:{width:50}})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(item.price*quantity).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item._id),className:\"danger\",children:\"Remove\"})})]},item._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total\",children:[\"Total: \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",total.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/marketplace/checkout',children:\"Proceed to Checkout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCart,className:\"danger\",children:\"Clear Cart\"})]})]})]})]});};export default ItemList;","map":{"version":3,"names":["React","useEffect","useState","Link","axios","useCart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ItemList","items","setItems","loading","setLoading","error","setError","cart","updateQuantity","removeFromCart","clearCart","total","reduce","sum","i","item","price","quantity","fetchItems","res","get","data","err","children","className","to","map","_item$owner","images","src","alt","title","concat","_id","description","slice","owner","username","length","_ref","type","min","value","onChange","e","parseInt","target","style","width","toFixed","onClick","window","location","href"],"sources":["C:/Users/chapl/bupue/bupue-frontend/src/components/marketplace/ItemList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Marketplace.css';\r\nimport { useCart } from '../../context/CartContext';\r\n\r\nconst ItemList = () => {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { cart, updateQuantity, removeFromCart, clearCart } = useCart();\r\n  const total = cart.reduce((sum, i) => sum + i.item.price * i.quantity, 0);\r\n\r\n  useEffect(() => {\r\n    const fetchItems = async () => {\r\n      try {\r\n        const res = await axios.get('/api/items');\r\n        setItems(res.data);\r\n      } catch (err) {\r\n        setError('Failed to load items');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchItems();\r\n  }, []);\r\n\r\n  if (loading) return <div>Loading items...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"marketplace-container\">\r\n      <h2>Marketplace</h2>\r\n      <Link to=\"/marketplace/create\" className=\"create-item-btn\">Add Item</Link>\r\n      <div className=\"items-grid\">\r\n        {items.map(item => (\r\n          <div key={item._id} className=\"item-card\">\r\n            {item.images && item.images[0] && (\r\n              <img src={item.images[0]} alt={item.title} />\r\n            )}\r\n            <div className=\"item-info\">\r\n              <h3><Link to={`/marketplace/${item._id}`}>{item.title}</Link></h3>\r\n              <p>{item.description.slice(0, 80)}...</p>\r\n              <div className=\"item-meta\">\r\n                <span>${item.price}</span>\r\n                <span>By {item.owner?.username || 'Unknown'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"marketplace-cart-container\">\r\n        <h3>Your Cart</h3>\r\n        {cart.length === 0 ? (\r\n          <div>Your cart is empty.</div>\r\n        ) : (\r\n          <>\r\n            <table className=\"cart-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Item</th>\r\n                  <th>Price</th>\r\n                  <th>Quantity</th>\r\n                  <th>Subtotal</th>\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {cart.map(({ item, quantity }) => (\r\n                  <tr key={item._id}>\r\n                    <td>{item.title}</td>\r\n                    <td>${item.price}</td>\r\n                    <td>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        value={quantity}\r\n                        onChange={e => updateQuantity(item._id, parseInt(e.target.value) || 1)}\r\n                        style={{ width: 50 }}\r\n                      />\r\n                    </td>\r\n                    <td>${(item.price * quantity).toFixed(2)}</td>\r\n                    <td>\r\n                      <button onClick={() => removeFromCart(item._id)} className=\"danger\">Remove</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div className=\"cart-total\">Total: <strong>${total.toFixed(2)}</strong></div>\r\n            <div className=\"cart-actions\">\r\n              <button onClick={() => window.location.href='/marketplace/checkout'}>Proceed to Checkout</button>\r\n              <button onClick={clearCart} className=\"danger\">Clear Cart</button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}