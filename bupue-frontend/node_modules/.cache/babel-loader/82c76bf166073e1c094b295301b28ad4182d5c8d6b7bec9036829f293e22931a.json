{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chapl\\\\bupue\\\\bupue-frontend\\\\src\\\\components\\\\auth\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport './Auth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [captchaToken, setCaptchaToken] = useState(null);\n  const recaptchaRef = useRef(null);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleCaptchaChange = token => {\n    setCaptchaToken(token);\n    setError(''); // Clear any previous errors when captcha is completed\n  };\n  const handleCaptchaExpired = () => {\n    setCaptchaToken(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!captchaToken) {\n      setError('Please complete the reCAPTCHA verification');\n      return;\n    }\n    try {\n      const response = await axios.post('/api/auth/login', {\n        ...formData,\n        captchaToken\n      });\n      localStorage.setItem('token', response.data.token);\n      navigate('/dashboard');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Login failed');\n      // Reset captcha on error\n      if (recaptchaRef.current) {\n        recaptchaRef.current.reset();\n      }\n      setCaptchaToken(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Email\",\n          value: formData.email,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group password-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: showPassword ? \"text\" : \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          value: formData.password,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"password-toggle\",\n          onClick: () => setShowPassword(!showPassword),\n          \"aria-label\": showPassword ? \"Hide password\" : \"Show password\",\n          children: showPassword ? \"üëÅÔ∏è\" : \"üëÅÔ∏è‚Äçüó®Ô∏è\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group captcha-group\",\n        children: /*#__PURE__*/_jsxDEV(ReCAPTCHA, {\n          ref: recaptchaRef,\n          sitekey: \"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\" // Test key - replace with your actual key\n          ,\n          onChange: handleCaptchaChange,\n          onExpired: handleCaptchaExpired,\n          theme: \"light\",\n          size: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"UMrOi26HxBQ76ma9alwhI2kgpBI=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useRef","axios","useNavigate","ReCAPTCHA","jsxDEV","_jsxDEV","Login","_s","formData","setFormData","email","password","error","setError","showPassword","setShowPassword","captchaToken","setCaptchaToken","recaptchaRef","navigate","handleChange","e","target","name","value","handleCaptchaChange","token","handleCaptchaExpired","handleSubmit","preventDefault","response","post","localStorage","setItem","data","err","_err$response","_err$response$data","message","current","reset","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","onClick","ref","sitekey","onExpired","theme","size","_c","$RefreshReg$"],"sources":["C:/Users/chapl/bupue/bupue-frontend/src/components/auth/Login.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport './Auth.css';\r\n\r\nconst Login = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [captchaToken, setCaptchaToken] = useState(null);\r\n  const recaptchaRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleCaptchaChange = (token) => {\r\n    setCaptchaToken(token);\r\n    setError(''); // Clear any previous errors when captcha is completed\r\n  };\r\n\r\n  const handleCaptchaExpired = () => {\r\n    setCaptchaToken(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!captchaToken) {\r\n      setError('Please complete the reCAPTCHA verification');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await axios.post('/api/auth/login', {\r\n        ...formData,\r\n        captchaToken\r\n      });\r\n      localStorage.setItem('token', response.data.token);\r\n      navigate('/dashboard');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Login failed');\r\n      // Reset captcha on error\r\n      if (recaptchaRef.current) {\r\n        recaptchaRef.current.reset();\r\n      }\r\n      setCaptchaToken(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      <h2>Login</h2>\r\n      {error && <div className=\"error\">{error}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group password-group\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"password-toggle\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n            aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n          >\r\n            {showPassword ? \"üëÅÔ∏è\" : \"üëÅÔ∏è‚Äçüó®Ô∏è\"}\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"form-group captcha-group\">\r\n          <ReCAPTCHA\r\n            ref={recaptchaRef}\r\n            sitekey=\"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\" // Test key - replace with your actual key\r\n            onChange={handleCaptchaChange}\r\n            onExpired={handleCaptchaExpired}\r\n            theme=\"light\"\r\n            size=\"normal\"\r\n          />\r\n        </div>\r\n        \r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}