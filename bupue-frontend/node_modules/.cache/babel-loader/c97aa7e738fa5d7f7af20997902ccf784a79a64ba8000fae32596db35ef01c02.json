{"ast":null,"code":"import _objectSpread from\"C:/Users/chapl/bupue/bupue-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import'./Courses.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CourseDetail=()=>{const{id}=useParams();const navigate=useNavigate();const[course,setCourse]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[editing,setEditing]=useState(false);const[editForm,setEditForm]=useState({title:'',description:'',price:''});const[editError,setEditError]=useState('');const user=JSON.parse(localStorage.getItem('user')||'null');useEffect(()=>{const fetchCourse=async()=>{try{const res=await axios.get(\"/api/courses/\".concat(id));setCourse(res.data);}catch(err){setError('Failed to load course');}finally{setLoading(false);}};fetchCourse();},[id]);const isOwner=user&&course&&user.id===course.owner;const handleEdit=()=>{setEditForm({title:course.title,description:course.description,price:course.price});setEditing(true);setEditError('');};const handleEditChange=e=>{setEditForm(_objectSpread(_objectSpread({},editForm),{},{[e.target.name]:e.target.value}));};const handleEditSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');await axios.put(\"/api/courses/\".concat(id),editForm,{headers:{Authorization:\"Bearer \".concat(token)}});setEditing(false);window.location.reload();}catch(err){var _err$response,_err$response$data;setEditError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to update course');}};const handleDelete=async()=>{if(!window.confirm('Are you sure you want to delete this course?'))return;try{const token=localStorage.getItem('token');await axios.delete(\"/api/courses/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});navigate('/courses');}catch(err){alert('Failed to delete course');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading course...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});if(!course)return/*#__PURE__*/_jsx(\"div\",{children:\"Course not found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"course-detail-container\",children:editing?/*#__PURE__*/_jsxs(\"form\",{className:\"edit-course-form\",onSubmit:handleEditSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:editForm.title,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:editForm.description,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:editForm.price,onChange:handleEditChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEditing(false),children:\"Cancel\"}),editError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:editError})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:course.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-meta\",children:[\"Price: $\",course.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"course-body\",children:course.description}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"course-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"danger\",children:\"Delete\"})]})]})});};export default CourseDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CourseDetail","id","navigate","course","setCourse","loading","setLoading","error","setError","editing","setEditing","editForm","setEditForm","title","description","price","editError","setEditError","user","JSON","parse","localStorage","getItem","fetchCourse","res","get","concat","data","err","isOwner","owner","handleEdit","handleEditChange","e","_objectSpread","target","name","value","handleEditSubmit","preventDefault","token","put","headers","Authorization","window","location","reload","_err$response","_err$response$data","response","message","handleDelete","confirm","delete","alert","children","className","onSubmit","type","onChange","required","onClick"],"sources":["C:/Users/chapl/bupue/bupue-frontend/src/components/courses/CourseDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Courses.css';\r\n\r\nconst CourseDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [course, setCourse] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [editing, setEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({ title: '', description: '', price: '' });\r\n  const [editError, setEditError] = useState('');\r\n\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n\r\n  useEffect(() => {\r\n    const fetchCourse = async () => {\r\n      try {\r\n        const res = await axios.get(`/api/courses/${id}`);\r\n        setCourse(res.data);\r\n      } catch (err) {\r\n        setError('Failed to load course');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchCourse();\r\n  }, [id]);\r\n\r\n  const isOwner = user && course && user.id === course.owner;\r\n\r\n  const handleEdit = () => {\r\n    setEditForm({ title: course.title, description: course.description, price: course.price });\r\n    setEditing(true);\r\n    setEditError('');\r\n  };\r\n\r\n  const handleEditChange = e => {\r\n    setEditForm({ ...editForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleEditSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`/api/courses/${id}`, editForm, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setEditing(false);\r\n      window.location.reload();\r\n    } catch (err) {\r\n      setEditError(err.response?.data?.message || 'Failed to update course');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Are you sure you want to delete this course?')) return;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete(`/api/courses/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      navigate('/courses');\r\n    } catch (err) {\r\n      alert('Failed to delete course');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading course...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n  if (!course) return <div>Course not found.</div>;\r\n\r\n  return (\r\n    <div className=\"course-detail-container\">\r\n      {editing ? (\r\n        <form className=\"edit-course-form\" onSubmit={handleEditSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={editForm.title}\r\n            onChange={handleEditChange}\r\n            required\r\n          />\r\n          <textarea\r\n            name=\"description\"\r\n            value={editForm.description}\r\n            onChange={handleEditChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            value={editForm.price}\r\n            onChange={handleEditChange}\r\n            required\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button type=\"button\" onClick={() => setEditing(false)}>Cancel</button>\r\n          {editError && <div className=\"error\">{editError}</div>}\r\n        </form>\r\n      ) : (\r\n        <>\r\n          <h2>{course.title}</h2>\r\n          <div className=\"course-meta\">Price: ${course.price}</div>\r\n          <div className=\"course-body\">{course.description}</div>\r\n          {isOwner && (\r\n            <div className=\"course-actions\">\r\n              <button onClick={handleEdit}>Edit</button>\r\n              <button onClick={handleDelete} className=\"danger\">Delete</button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseDetail; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}